<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>InamManagement</title>
<!-- Bootstrap CSS -->

<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	rel="stylesheet">
<link rel="stylesheet" href="/css/sidebar.css">
<link rel="stylesheet" href="/css/home.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body, html {
    margin: 0;
    padding: 0;
    overflow-x: hidden; 
    height: 100%;
}
.container-wrapper {
	padding: 20px;
}

.stats-container {
	padding: 10px 60px;
	display: flex;
	justify-content: space-between;
	margin-bottom: 20px;
}

.stats-card {
	background-color: #f8f9fa;
	border: 1px solid #dee2e6;
	border-radius: 5px;
	padding: 20px;
	width: 30%;
	text-align: center;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	margin-right: 10px; /* Add space between cards */
}

.stats-card:last-child {
	margin-right: 0; /* Remove margin from the last card */
}

.stats-card h3 {
	font-size: 18px;
	margin-bottom: 10px;
}

.stats-card p {
	font-size: 36px;
	margin: 0;
	padding: 10px;
	color: #007bff;
}

.chart-container {
	padding: 20px;
	background-color: #ffffff;
	border: 1px solid #dee2e6;
	border-radius: 5px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	margin-top: 20px;
	text-align: center;
}

.chart-container h3 {
	font-size: 24px;
	margin-bottom: 20px;
}

.time-period-buttons {
	margin-bottom: 20px;
}

.time-period-buttons button {
	padding: 10px 20px;
	font-size: 16px;
	margin: 0 5px;
	border: 1px solid #dee2e6;
	border-radius: 5px;
	background-color: #f8f9fa;
	cursor: pointer;
}

.time-period-buttons button.active {
	background-color: #007bff;
	color: #ffffff;
}

#pieChart {
	width: 100%;
	max-width: 600px;
	margin: 0 auto;
}

.form-container {
	padding: 20px;
	background-color: #ffffff;
	border: 1px solid #dee2e6;
	border-radius: 5px;
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
	margin-top: 20px;
	max-width: 454px;
    margin-left: -43px;
}

.form-container h3 {
	font-size: 24px;
	margin-bottom: 20px;
}

.form-group {
	margin-bottom: 15px;
}

.form-group label {
	display: block;
	margin-bottom: 5px;
	font-size: 16px;
}

.form-group select, .form-group input {
	width: 100%;
	padding: 10px;
	font-size: 16px;
	border: 1px solid #dee2e6;
	border-radius: 5px;
}

.form-group button {
	padding: 10px 20px;
	font-size: 16px;
	border: 1px solid #dee2e6;
	border-radius: 5px;
	background-color: #007bff;
	color: #ffffff;
	cursor: pointer;
}
.form-move {
    position: relative;
    top: -433px;
    left: 473px;
}
</style>
</head>
<body>
	<div th:if="${session.user.role == 'admin'}">
		<div class="sidebar">

			<img style="padding-bottom: 30px;" width="230" height="150"
				th:src="@{/aimg/logo.png}" alt=""> <br>
			<ul class="nav flex-column">
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/dashboard.png" alt="dashboard" /> <a
					class="nav-link active" href="/home" th:data-target="profile">DashBoard</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/search.png" alt="Profile" /> <a class="nav-link active"
					href="/search?type=1" th:data-target="profile">View Tenant</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/addicon.png" alt="Add Tenant" /> <a class="nav-link"
					href="/addTenant">Add Tenant</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/eb.png" alt="EB Bill" /> <a class="nav-link"
					href="/search?type=2" th:data-target="addEBBill">Add EB-Bill</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/visitor.png" alt="Visitors" /> <a class="nav-link"
					href="/viewVisitor" th:data-target="visitors">Visitors</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/complain.png" alt="Complains" /> <a class="nav-link"
					href="/complain" th:data-target="complains">Complains</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/chat.png" alt="chat" /> <a class="nav-link" href="/chat"
					th:data-target="chat">chat</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/event.png" alt="Events" /> <a class="nav-link"
					href="/events" th:data-target="addEvents">Add Events</a></li>
				<li class="nav-item"><img width="30" height="30"
					src="/aimg/logout.png" alt="Logout" /> <a class="nav-link"
					href="/logout">Log-Out</a></li>
			</ul>
		</div>
		<div class="content">
			<div class="container-fluid">
				<div class="container mt-5">
					<div class="container-wrapper">
						<div class="stats-container">
							<div class="stats-card">
								<h3>No Of Complains</h3>
								<p id="totalExams" th:text="${noOfPaid}">0</p>
							</div>
							<div class="stats-card">
								<h3>No Of Tenant</h3>
								<p id="endedExams" th:text="${noOfUsers}">0</p>
							</div>
							<div class="stats-card">
								<h3>No of Houses</h3>
								<p id="totalUsers" th:text="${noOfUsers}">0</p>
							</div>
						</div>
						<div class="chart-container">
							<h3>Complain Statistics</h3>
							<div class="time-period-buttons">
								<button id="btn1Month" class="active">1 Month</button>
								<button id="btn6Months">6 Months</button>
								<button id="btn1Year">1 Year</button>
							</div>
							<canvas id="pieChart"></canvas>
						</div>
						<div class="form-container">
							<h3>Select BHK Type and Floor Number</h3>
							<form th:action="@{/flatsadd}" method="post">
								<div class="form-group">
									<label for="bhkType">BHK Type</label> <select id="bhkType"
										name="flatType">
										<option value="2BHK">2BHK</option>
										<option value="3BHK">3BHK</option>
										<option value="4BHK">4BHK</option>
									</select>
								</div>
								<div class="form-group">
									<label for="floorNumber">Floor Number</label> <input
										type="number" id="floorNumber" name="flatFloor"
										placeholder="Enter floor number">
								</div>
								<div class="form-group">
									<label for="houseNumber">No Of House</label> <input
										type="number" id="houseNumber" name="noOfRooms"
										placeholder="Enter number of houses">
								</div>
								<div class="form-group">
									<input type="hidden" id="type" name="type" value="house">
								</div>
								<div class="form-group">
									<button type="submit">Submit</button>
								</div>
							</form>
						</div>
						<div class="form-move">
						<div class="form-container">
							<h3>Select Floor Number for Multi-Purpose Hall</h3>
							<form th:action="@{/multipurposehalladd}" method="post">
								<div class="form-group">
									<label for="mphFloorNumber">Floor Number</label> <input
										type="number" id="mphFloorNumber" name="flatFloor"
										placeholder="Enter floor number">
								</div>
								<div class="form-group">
									<button type="submit">Submit</button>
								</div>
							</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="sidebar" th:if="${session.user.role != 'admin'}">

		<img style="padding-bottom: 30px;" width="230" height="150"
			th:src="@{/aimg/logo.png}" alt=""> <br>
		<ul class="nav flex-column">
			<li class="nav-item"><img width="30" height="30"
				src="/aimg/profileicon.png" alt="Profile" /> <a
				class="nav-link active" href="/profile" th:data-target="profile">Profile</a></li>
			<li class="nav-item"><img width="30" height="30"
				src="/aimg/eb.png" alt="EB Bill" /> <a class="nav-link"
				href="/payment" th:data-target="addEBBill">payment</a></li>
			<li class="nav-item"><img width="30" height="30"
				src="/aimg/complain.png" alt="Complains" /> <a class="nav-link"
				href="/complain" th:data-target="complains">Complains</a></li>
			<li class="nav-item"><img width="30" height="30"
				src="/aimg/chat.png" alt="chat" /> <a class="nav-link" href="/chat"
				th:data-target="chat">chat</a></li>
			<li class="nav-item"><img width="30" height="30"
				src="/aimg/event.png" alt="Events" /> <a class="nav-link"
				href="/events" th:data-target="addEvents">Events</a></li>
			<li class="nav-item"><img width="30" height="30"
				src="/aimg/logout.png" alt="Logout" /> <a class="nav-link"
				href="/logout">Log-Out</a></li>
		</ul>
	</div>
	<script th:inline="javascript">
		const counts = /*[[${count}]]*/ [];
		console.log("Counts:", counts);
        const ctx = document.getElementById('pieChart').getContext('2d');
        const pieChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Plumbing', 'HVAC', 'Electrical', 'Others'],
                datasets: [{
                    data: counts,
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
            }
        });

        const buttons = document.querySelectorAll('.time-period-buttons button');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                buttons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                // Update chart data based on selected time period
                updateChartData(this.id);
            });
        });

        function updateChartData(period) {
            // Logic to update chart data based on the period
            // This is a placeholder logic and should be replaced with actual data fetching and updating
            if (period === 'btn1Month') {
                pieChart.data.datasets[0].data = counts;
            } else if (period === 'btn6Months') {
                pieChart.data.datasets[0].data = counts;
            } else if (period === 'btn1Year') {
                pieChart.data.datasets[0].data = counts;
            }
            pieChart.update();
        }
    </script>
	<!-- Bootstrap JS and dependencies -->
	<script
		src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
	<script
		src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</body>
</html>
